function search(e,t){SC.initialize({client_id:"c381048a8c48b7a419f2be16c079f8da"}),SC.get("/tracks",{q:e,limit:t},function(e){for(var t="",a=0;a<e.length;a++)t+='<li data-link="'+e[a].permalink_url+'"><div class="panel__avatar"><img src="'+e[a].user.avatar_url+'"></div><div class="panel__title"><strong>'+e[a].title+"</strong>"+e[a].user.username+"</div></li>";$(".header__userExperience__panel").empty().html(t)})}function SoundcloudFind(e){SC.initialize({client_id:"c381048a8c48b7a419f2be16c079f8da"}),SC.get("/resolve",{url:e},function(e){musicCurrent=e,console.log("musicCurrent ",musicCurrent);var t=e.stream_url+"?client_id=c381048a8c48b7a419f2be16c079f8da";playerLaunch(t,musicCurrent)})}function playerLaunch(e,t){$(".header__userExperience__panel").empty(),pButton.classList.remove("icon-arrow"),pButton.classList.add("icon-pause-button-outline"),$(".player__cover").animate({opacity:"0"},{queue:!1,duration:500,complete:function(){null==t.artwork_url?cover="http://blog.grainedephotographe.com/wp-content/uploads/2014/03/%C2%A9-Danny-Santos-Portraits-of-Strangers-17.jpg":cover=t.artwork_url,$(".player__cover").css({background:"url("+cover+")","background-repeat":"no-repeat","background-size":"cover"}),$(".player__cover").animate({opacity:"1"},900)}}),$(".player__describe__playlist, .player__describe__title, .player__duration__time").animate({top:"50px"},{queue:!1,duration:500,complete:function(){$(".player__describe__title").text("").text(t.title),$(".player__describe__playlist").text("").text(t.user.username),$(".player__describe__playlist, .player__describe__title, .player__duration__time").animate({top:"0px"},500)}}),music.setAttribute("src",e),music.play()}function onTrackedVideoFrame(e,t){var a=Math.floor(e),i=Math.floor(t),n=i-a,r=n.toString().slice(-4,-2),l=n.toString().slice(-2);i=""==r?"0:"+l:r+":"+l,$(".player__duration__time").text(i)}function clickPercent(e){return(e.pageX-timeline.offsetLeft)/timelineWidth}function mouseDown(){onplayhead=!0,window.addEventListener("mousemove",moveplayhead,!0),music.removeEventListener("timeupdate",timeUpdate,!1)}function mouseUp(e){1==onplayhead&&(moveplayhead(e),window.removeEventListener("mousemove",moveplayhead,!0),music.currentTime=duration*clickPercent(e),music.addEventListener("timeupdate",timeUpdate,!1)),onplayhead=!1}function moveplayhead(e){var t=e.pageX-timeline.offsetLeft;t>=0&&t<=timelineWidth&&(playhead.style.marginLeft=t+"px",timelineCurrent.style.width=t+"px"),t<0&&(playhead.style.marginLeft="0px",timelineCurrent.style.width="0px"),t>timelineWidth&&(playhead.style.marginLeft=timelineWidth+"px",timelineCurrent.style.width=timelineWidth+"px")}function timeUpdate(){var e=timelineWidth*(music.currentTime/duration);playhead.style.marginLeft=e+"px",timelineCurrent.style.width=e+"0px",music.currentTime==duration&&($("#play").removeClass("icon-pause-button-outline"),$("#play").addClass("icon-arrow"),playhead.style.marginLeft="0px",timelineCurrent.style.width="0px")}function play(){music.paused?(music.play(),$("#play").removeClass("icon-arrow"),$("#play").addClass("icon-pause-button-outline")):(music.pause(),$("#play").removeClass("icon-pause-button-outline"),$("#play").addClass("icon-arrow"))}function initMp3Player(){context=new AudioContext,analyser=context.createAnalyser(),canvas=document.getElementById("analyser_render"),ctx=canvas.getContext("2d"),source=context.createMediaElementSource(music),source.connect(analyser),analyser.connect(context.destination),frameLooper()}function frameLooper(){window.requestAnimationFrame(frameLooper),fbc_array=new Uint8Array(analyser.frequencyBinCount),analyser.getByteFrequencyData(fbc_array),ctx.clearRect(0,0,canvas.width,canvas.height);var e=ctx.createRadialGradient(0,0,50,0,150,300);e.addColorStop(0,"#65c6bb"),e.addColorStop(.9,"#4c43c4"),ctx.fillStyle=e,bars=1600;for(var t=0;t<bars;t++)bar_x=10*t,bar_width=2,bar_height=-(fbc_array[t]/2),ctx.fillRect(bar_x,canvas.height,bar_width,bar_height)}function clickPlaylist(e){numberIndexPlaylist=e,SoundcloudFind(playlist[e])}var musicCurrent;$(".header__userExperience__search input").keyup(function(){var e=$(this).val();e.length>0?($(".header__userExperience__panel").show(),search(e,6)):($(".header__userExperience__panel").empty(),$(".header__userExperience__panel").hide())}),$("body").on("click",".header__userExperience__panel li",function(){SoundcloudFind($(this).data("link"))}),$(".header__logo").click(function(){$(this).toggleClass("toggle--active"),$(".wrapper").toggleClass("wrapper--menu"),$(".menu").slideToggle(800)});var duration,music=document.getElementById("player__music"),pButton=document.getElementById("play"),playhead=document.getElementById("playhead"),timeline=document.getElementById("timeline"),timelineCurrent=document.getElementById("timeline__current"),onplayhead=!1,timelineWidth=timeline.offsetWidth-playhead.offsetWidth;music.crossOrigin="anonymous",timeline.addEventListener("click",function(e){moveplayhead(e),music.currentTime=duration*clickPercent(e)},!1),playhead.addEventListener("mousedown",mouseDown,!1),window.addEventListener("mouseup",mouseUp,!1),$("#play").click(function(){play()}),music.addEventListener("canplaythrough",function(){duration=music.duration},!1),$("#player__music").on("timeupdate",function(){onTrackedVideoFrame(this.currentTime,this.duration),timeUpdate()});var canvas,ctx,source,context,analyser,fbc_array,bars,bar_x,bar_width,bar_height;window.addEventListener("load",initMp3Player,!1);var numberIndexPlaylist,playlist=["https://soundcloud.com/ngusrunsdon/be-real-ft-dej-loaf-explicit","https://soundcloud.com/hotnewexclusive/meek-mill-heaven-or-hell-ft","https://soundcloud.com/detoto/detoto-the-buckeye-party-mix","https://soundcloud.com/itspraddy/ed-sheeran-photograph-acoustic-version"];$(".listPlaylist li").click(function(){var e=$(this).index();clickPlaylist(e)}),$(".player__controll__prev").click(function(){if("undefined"!=typeof playlist){var e=playlist.length-1,t=numberIndexPlaylist-1;if(t>=0)clickPlaylist(t);else if(t<0){var t=e;numberIndexPlaylist=e,clickPlaylist(t)}}}),$(".player__controll__next").click(function(){if("undefined"!=typeof playlist){var e=playlist.length-1,t=numberIndexPlaylist+1;if(t<e||t==e)clickPlaylist(t);else if(t>e){var t=0;numberIndexPlaylist=0,clickPlaylist(t)}}});